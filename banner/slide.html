<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <title>slide-demo</title>
    <link href="../css/public/bootstrap.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
        .show_banner_title, .show_banner_head {
            text-align: center;
            position: relative;
        }

        .show_banner_head {
            /* margin-bottom: 40px;*/
            padding-bottom: 40px;
        }

        .show_banner_title h4 {
            font-weight: 900;
        }

        .show_banner_title:before, .show_banner_title:after {
            content: '';
            position: absolute;
            top: 50%;
            height: 1px;
            width: 32%;
        }

        .show_banner_title:before {
            left: 0;
        }

        .show_banner_title:after {
            right: 0;
        }

        .slide-block {
            position: relative;
        }

        .show_slide {
            top: -30px;
            border: transparent;
            border-radius: 50%;
            cursor: pointer;
            display: inline-block;
            font-size: 1em;
            width: 25px;
            height: 25px;
            line-height: 23px;
            text-align: center;
            position: absolute;
        }

        .show_slide:hover {
            border-radius: 50%;
            text-decoration: none;
        }

        .slide_left {
            left: 0;
        }

        .slide_right {
            right: 0;
        }

        .show_carousel_part {
            overflow: hidden;
        }

        .show_carousel_block {
            overflow: auto;
            zoom: 1;
        }

        .show_item > div {
            margin: 0 10px;
        }

        .show_item img {
            width: 100%;
        }

        .show_carousel_block {
            left: 0;
            display: block;
            transition: all 1000ms ease;
            position: relative;
        }

        .show_item_title {
            text-align: center;
        }

        .show_banner_title:before, .show_banner_title:after {
            background-color: #ff0022;
        }

        .show_slide {
            background-color: #ff0022;
            color: #ffffff;
        }

        .show_slide:hover {
            background-color: #fff;
            border: solid 1px #ff0022;
            color: #ff0022;
        }

    </style>
</head>

<body>
<div class="show_banner_block">
    <div class="container block_margin " id="show-part">
        <div class="show_banner_head">
            <div class="show_banner_title"><h4>企业推荐</h4></div>
            <div class="slide-block">
                <a class="show_slide slide_left">&lsaquo;</a>
                <a class="show_slide slide_right">&rsaquo;</a>
            </div>
        </div>
        <div class="show_carousel_part">
            <div class="show_carousel_block">
                <!--循环添加开始-->
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp2-1.png" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业8</div>
                        </a>
                    </div>
                </div>
                <!--循环添加结束-->
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp1-1.jpg" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业1</div>
                        </a>
                    </div>
                </div>
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp1-1.jpg" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业2</div>
                        </a>
                    </div>
                </div>
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp1-1.jpg" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业3</div>
                        </a>
                    </div>
                </div>
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp1-1.jpg" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业4</div>
                        </a>
                    </div>
                </div>
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp2-1.png" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业5</div>
                        </a>
                    </div>
                </div>
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp2-1.png" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业6</div>
                        </a>
                    </div>
                </div>
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp2-1.png" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业7</div>
                        </a>
                    </div>
                </div>
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp2-1.png" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业8</div>
                        </a>
                    </div>
                </div>
                <!--循环添加开始-->
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp1-1.jpg" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业1</div>
                        </a>
                    </div>
                </div>
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp1-1.jpg" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业2</div>
                        </a>
                    </div>
                </div>
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp1-1.jpg" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业3</div>
                        </a>
                    </div>
                </div>
                <div class="pull-left show_item">
                    <div>
                        <a href=""><img src="../image/comp1-1.jpg" alt=""></a>
                        <a href="">
                            <div class="show_item_title">企业4</div>
                        </a>
                    </div>
                </div>
                <!--循环添加结束-->
            </div>

        </div>
    </div>
</div>

</body>
<!--<script src="js/public/jquery-1.11.3.min.js"></script>-->
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
<script src="../js/public/bootstrap-3.3.5.js"></script>
<script>
    $(function () {
        initRound();
        function initRound() {
            var item_width = $(".container").width() / 4;
            var number = $(".show_item").length;
            $(".show_item").width(item_width);

            $(".show_carousel_block").width(item_width * number).css({
                'transition': '0ms',
                'transform': 'translate3D(-' + (item_width) + 'px,0,0)'
            })
            showCarouselRound($(".show_carousel_block"));
        }

        function showCarouselRound($el) {
            var width = $el.children().width();
            var currentIndex = 1;
            var showCount = 8;
            var maxIndex = showCount + currentIndex - 1, minIndex = currentIndex;

            var time;
            initBannerAction();
          /*  $(".show_banner_block").mouseenter(function () {
                clearInterval(time)
            }).mouseleave(function () {

            });*/

            document.getElementById('show-part').addEventListener("mouseleave",function (event) {
                // relatedTarget在不正常触发mouseleave时，返回null
                console.log('leave0');
                if(event.relatedTarget){
                    console.log('leave');
                    initBannerAction();
                }
            });
            document.getElementById('show-part').addEventListener("mouseenter",function (event) {
                console.log('enter0');
                if(event.relatedTarget){
                    console.log('enter');
                    clearInterval(time)
                }
            });

            $(".slide_left").click(function () {
                bannerAction("left");
            });

            var TimeFn = null;
            $(".slide_right").click(function () {
                //bannerAction();
                clearTimeout(TimeFn);
                //执行延时
                TimeFn = setTimeout(function(){
                    bannerAction();
                },300);
            });
            $(".slide_right").dblclick(function () {
                clearTimeout(TimeFn);
            });

            function initBannerAction() {
                time = setInterval(bannerAction, 2000);
            }

            function bannerAction(action) {
                action = action || "next";
                if (action == "next") {
                    if (currentIndex < maxIndex) {
                        currentIndex++;
                        $el.css({
                            'transition-duration': '500ms',
                            'transform': 'translate3D(-' + (currentIndex * width) + 'px,0,0)'
                        });
                    } else {
                        currentIndex++;
                        $el.css({
                            'transition-duration': '500ms',
                            'transform': 'translate3D(-' + (currentIndex * width) + 'px,0,0)'
                        });
                        setTimeout(function () {
                            currentIndex = minIndex;
                            $el.css({
                                'transition-duration': '0ms',
                                'transform': 'translate3D(-' + (currentIndex * width) + 'px,0,0)'
                            });
                        }, 500)
                    }
                } else {
                    if (currentIndex > minIndex) {
                        currentIndex--;
                        $el.css({
                            'transition-duration': '500ms',
                            'transform': 'translate3D(-' + (currentIndex * width) + 'px,0,0)'
                        });
                    } else {
                        currentIndex--;
                        $el.css({
                            'transition-duration': '500ms',
                            'transform': 'translate3D(' + (currentIndex * width) + 'px,0,0)'
                        });
                        setTimeout(function () {
                            currentIndex = maxIndex;
                            $el.css({
                                'transition-duration': '0ms',
                                'transform': 'translate3D(-' + (currentIndex * width) + 'px,0,0)'
                            });
                        }, 500);
                    }
                }
            }

        }

        //initShowBanner();
        /* function initShowBanner() {
         var item_width=$(".container").width()/4;
         var number=$(".show_item").length;
         $(".show_item").width(item_width);

         $(".show_carousel_block").width(item_width*number)
         showCarousel($(".show_carousel_block"));
         }
         function showCarousel($el) {
         var parentWidth=$el.width();
         var width=$el.children().width();
         var index=0;

         var time;
         initBannerAction();
         $(".show_item").hover(function () {
         clearInterval(time)
         },function () {
         initBannerAction();
         });

         $(".slide_left").click(function () {
         bannerAction("left");
         clearInterval(time);
         setTimeout(bannerAction,2000);
         });

         $(".slide_right").click(function () {
         bannerAction();
         clearInterval(time);
         setTimeout(bannerAction,2000);
         });

         function initBannerAction() {
         time=setInterval(bannerAction,2000);
         }

         function bannerAction(action) {
         action=action||"next";
         var test=(index+4)*width;
         if(action=="next"){
         if((index+4)*width<parentWidth){
         index++;
         }else {
         index=0;
         }
         }else {
         if((index>1)){
         index--;
         }else {
         index=0;
         }
         }
         var cssStr='translateX(-'+(index*width)+'px)';
         $el.css("transform",cssStr);
         }

         }*/
    });

</script>
</html>